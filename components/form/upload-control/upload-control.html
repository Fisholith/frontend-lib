<div class="form-upload-control"
	ng-file-drop-available="dropSupported = true"
	ng-class="{ 'form-upload-control-drop-target': dropSupported }"
	ng-file-drag-over-class="form-upload-control-drop-active"
	ng-file-drop="onFileSelect( $files )"
	>

	<div ng-show="!ngModel.$viewValue.length">

		<!--
			If we have a label, then we show the upload "button" as a link instead.
			We hide the button and use it to simulate a click on it.
		-->
		<div class="small" ng-if="!!uploadLinkLabel">
			<a class="link-muted" ng-click="showFileSelect()">
				{{ uploadLinkLabel }}
			</a>
		</div>

		<input type="file"
			ng-if="!multiple"
			ng-file-select="onFileSelect( $files )"
			ng-hide="!!uploadLinkLabel"
			accept="{{ accept }}"
			>

		<input type="file"
			ng-if="multiple"
			ng-file-select="onFileSelect( $files )"
			ng-hide="!!uploadLinkLabel"
			accept="{{ accept }}"
			multiple
			>
	</div>

	<div class="form-upload-control-files" ng-show="ngModel.$viewValue.length && !progress">
		<ul class="list-unstyled">

			<li ng-repeat="file in ngModel.$viewValue">
				<span class="form-upload-control-file-name">{{ file.name }}</span>
				<a class="btn btn-danger-outline btn-sm" ng-class="{ 'block big': Screen.isXs }" ng-click="clearFile( $index )">
					<span class="jolticon jolticon-remove"></span>
					<span translate>Clear File</span>
				</a>
			</li>

		</ul>
	</div>

	<div class="progress" ng-if="progress !== false">
		<div class="progress-bar"
			role="progressbar"
			ng-attr-aria-valuenow="{{ progress }}"
			aria-valuemin="0"
			aria-valuemax="100"
			ng-style="{ width: progress + '%' }"
			>
			<span ng-if="progress < 99">
				{{ progress }}%
			</span>
			<span ng-if="progress >= 99" translate>
				Processing...
			</span>
		</div>
	</div>

	<div ng-if="progress >= 99">
		<br>
		<div class="alert alert-info">
			<p translate>
				Upload complete! Please wait while we process your file. This may take a few minutes, so don't close or refresh the page.
			</p>
		</div>
	</div>
</div>
